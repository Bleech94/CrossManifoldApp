<!DOCTYPE html>
<html>
<head>
    <!--
        Customize this policy to fit your own app's needs. For more guidance, see:
            https://github.com/apache/cordova-plugin-whitelist/blob/master/README.md#content-security-policy
        Some notes:
            * gap: is required only on iOS (when using UIWebView) and is needed for JS->native communication
            * https://ssl.gstatic.com is required only on Android and is needed for TalkBack to function properly
            * Disables use of inline scripts in order to mitigate risk of XSS vulnerabilities. To change this:
                * Enable inline JS: add 'unsafe-inline' to default-src
        -->
    <!--
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' data: gap: https://ssl.gstatic.com 'unsafe-eval'; style-src 'self' 'unsafe-inline'; media-src *">
    -->

    <!-- Required meta tags-->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-tap-highlight" content="no">

    <title>Cross Manifold</title>

    <!-- To support both iOS and material design themes, see the Framework7 Tutorial at the link below:
        http://www.idangero.us/framework7/tutorials/maintain-both-ios-and-material-themes-in-single-app.html -->
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="lib/font-awesome-4.6.3/css/font-awesome.min.css">
</head>

<body>
    <!-- Status bar overlay for full screen mode (PhoneGap) -->
    <div class="statusbar-overlay"></div>

    <!-- Views -->
    <div class="views">
        <!-- Your main view, should have "view-main" class -->
        <div class="view view-main navbar-through">
            <!-- Top Navbar -->
            <div class="navbar">
              <div class="navbar-inner" data-page="login">
                <div class="left sliding"></div>
                <!-- We need cool sliding animation on title element, so we have additional "sliding" class -->
                <div class="center sliding" style="left:1px">Log In</div>
                <div class="right sliding"></div>
              </div>
            </div>
            <!-- Pages container, because we use fixed-through navbar and toolbar, it has additional appropriate classes -->
            <div class="pages">
              <!-- Login page. TODO: How to handle if login info is saved?-->
              <div data-page="login" class="page">
                <!-- Scrollable page content -->
                <div class="page-content">
                  <div class="content-block">
                      <center><img src="/img/logoPlain.png" alt="Cross Manifold" width="60%"></center>
                      <br><br><br><br><br>
                      <div align="center">
                        <p>Enter your 12-16 character Cross Manifold ID:</p>
                        <input type="text" id="CMID-input1" placeholder="XXXX" size="1" maxlength="4" class="CMID-input">
                        - <input type="text" id="CMID-input2" placeholder="XXXX" size="1" maxlength="4" class="CMID-input">
                        - <input type="text" id="CMID-input3" placeholder="XXXX" size="1" maxlength="4" class="CMID-input">
                        - <input type="text" id="CMID-input4" placeholder="XXXX" size="1" maxlength="4" class="CMID-input">
                        <br><br><br>
                      </div>
                      <input type="button" value="Connect" class="button login-button button-fill color-custom">
                      <div id="footer">
                        <p>Don't have a Cross Manifold yet? Buy Now! TODO: link</p>
                        <p style="font-size: 70%;">&copy; 2016 Cross Manifold.</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
        </div>
    </div>

    <!-- TEMPLATES: Initialize here and navigate in my-app.js -->
    <!-- Main template -->
    <script type="text/template7" id="main">
      <!-- Dynamic Navbar for iOS theme -->
      {{#if @global.ios}}
        <div class="navbar">
            <div class="navbar-inner">
                <!-- We need cool sliding animation on title element, so we have additional "sliding" class -->
                <div class="center sliding">Cross Manifold</div>
                <div class="right sliding">
                    <a href="#" class="link settings-button"><i class="fa fa-gear"></i><span>Settings</span></a>
                </div>
            </div>
        </div>
      {{/if}}

        <!-- Page, "data-page" contains page name -->
        <div data-page="main" class="page">
          <!-- Fixed Navbar for Material theme -->
          {{#if @global.material}}
            <div class="navbar">
                <div class="navbar-inner">
                    <!-- We need cool sliding animation on title element, so we have additional "sliding" class -->
                    <div class="center">Cross Manifold</div>
                    <div class="right">
                        <a href="#" class="link icon-only settings-button"><i class="fa fa-gear"><span> Settings</span></i></a>
                    </div>
                </div>
            </div>
          {{/if}}

            <!-- Scrollable page content -->
            <div class="page-content">
                <div class="content-block no-gap">

                      <!-- Column Headers -->
                      <div class="row">
                        <div class="col-25">
                        </div>
                        <div class="col-25">
                          <h5>Current<br>Temperature:</h5>
                        </div>
                        <div class="col-50">
                          <h5>Desired<br>Temperature:</h5>
                        </div>
                      </div>

                      <!-- Generate columns with thermostat info-->
                      {{#each thermostatReading}}
                        <div {{#js_compare "index%2 === 0"}}class="row" {{else}}class="row odd" {{/js_compare}}>
                          <div class="col-25">
                            <p style="margin-top: 19px; padding-left:5px;">Zone {{js "index++"}}: {{#js_compare "zoneNameArray[index-2]"}}{{js "zoneNameArray[index-2]"}} {{else}} {{/js_compare}}</p>
                          </div>
                          <div class="col-25">
                            <h5 class="current-temp" style="margin-top: 19px;">{{current}}&deg;</h5>
                          </div>
                          <div class="col-50">
                            <p class="buttons-row" style="padding-right:5px;">
                              <input type="button" class="button button-raised button-fill color-custom decrement" value="-">
                              <a class="button color-custom desired-temp" style="pointer-events: none">{{desired}}&deg;</a>
                              <input type"button" class="button button-raised button-fill color-custom increment" value="+">
                            </p>
                          </div>
                        </div>
                      {{/each}}
                      <br>
                    <input type="button" class="button button-fill color-custom-green apply-button" value="Apply">

                </div>
            </div>
        </div>
    </script>

    <!-- Settings template -->
    <script type="text/template7" id="settings">
      <!-- Dynamic Navbar for iOS theme-->
      {{#if @global.ios}}
        <div class="navbar">
            <div class="navbar-inner">
                <!-- We need cool sliding animation on title element, so we have additional "sliding" class -->
                <div class="left sliding">
                    <a href="#" class="link back icon-only"><i class="icon icon-back"></i></a>
                </div>
                <div class="center sliding">Settings</div>
            </div>
        </div>
      {{/if}}

        <!-- Page, "data-page" contains page name -->
        <div data-page="settings" class="page">
          <!-- Fixed Navbar for Material theme -->
          {{#if @global.material}}
            <div class="navbar">
                <div class="navbar-inner">
                    <!-- We need cool sliding animation on title element, so we have additional "sliding" class -->
                    <div class="left">
                        <a href="#" class="link back icon-only"><i class="icon icon-back"></i></a>
                    </div>
                    <div class="center">Settings</div>
                </div>
            </div>
          {{/if}}

          <!-- Scrollable page content -->
          <div class="page-content">
            <div class="list-block">
                <ul>
                  <li class="list-group-title">Zone Settings</li>
                    <!-- Generate buttons for each zone -->
                    {{#each thermostatReading}}
                    <li>
                      <a href="#" class="item-link item-content zone-settings-button">
                        <div class="item-inner">
                          <div class="item-title">Zone {{js "index++"}}</div>
                        </div>
                      </a>
                    </li>
                   {{/each}}
                </ul>
            </div>
              <div class="list-block">
                <div class="list-group"><ul><li class="list-group-title">Change CMID</li></ul></div>
              </div>
            <div class="content-block">
              <input type="button" href="#" class="button button-raised button-fill color-custom-red logout-button" value="Logout">
            </div>
          </div>
        </div>
    </script>

    <!-- Zone Settings template -->
    <script type="text/template7" id="zonesettings">
      <!-- Dynamic Navbar for iOS theme-->
      {{#if @global.ios}}
        <div class="navbar">
            <div class="navbar-inner">
                <!-- We need cool sliding animation on title element, so we have additional "sliding" class -->
                <div class="left sliding">
                    <a href="#" class="link back icon-only"><i class="icon icon-back"></i></a>
                </div>
                <div class="center sliding">Zone Settings</div>
                <div class="right sliding">
                  <a href="#" class="link done-button">Done</a>
                </div>
            </div>
        </div>
      {{/if}}

        <!-- Page, "data-page" contains page name -->
        <div data-page="zonesettings" class="page">
          <!-- Fixed Navbar for Material theme -->
          {{#if @global.material}}
            <div class="navbar">
                <div class="navbar-inner">
                    <!-- We need cool sliding animation on title element, so we have additional "sliding" class -->
                    <div class="left">
                        <a href="#" class="link back icon-only"><i class="icon icon-back"></i></a>
                    </div>
                    <div class="center">Zone Settings</div>
                    <div class="right">
                      <a href="#" class="link done-button">Done</a>
                    </div>
                </div>
            </div>
          {{/if}}

          <!-- Scrollable page content -->
          <div class="page-content">
            <div class="content-block-title">Full Layout</div>

              <!-- TODO: When settings are applied, use mainView.router.back -->
              <div class="list-block">
                <ul>
                  <li>
                    <div class="item-content">
                      <div class="item-inner">
                        <div class="item-title label">Switch</div>
                        <div class="item-input">
                          <label class="label-switch">
                            <input type="checkbox">
                            <div class="checkbox"></div>
                          </label>
                        </div>
                      </div>
                    </div>
                  </li>
                </ul>
            </div>
        </div>
    </script>

    <script type="text/javascript" src="cordova.js"></script>
    <script type="text/javascript" src="lib/framework7/js/framework7.min.js"></script>

    <!-- Add styles based on device -->
    <script>
      (function () {
        if (Framework7.prototype.device.android) {
              Dom7('head').append(
                  '<link rel="stylesheet" href="lib/framework7/css/framework7.material.min.css">' +
                  '<link rel="stylesheet" href="lib/framework7/css/framework7.material.colors.min.css">'
              );
          }
          else {
              Dom7('head').append(
                  '<link rel="stylesheet" href="lib/framework7/css/framework7.ios.min.css">' +
                  '<link rel="stylesheet" href="lib/framework7/css/framework7.ios.colors.min.css">'
              );
          }
      })();
    </script>

    <script src="https://cdn.pubnub.com/pubnub-dev.js"></script>
    <script type="text/javascript" src="js/my-pubnub.js"></script>
    <script type="text/javascript" src="js/my-app.js"></script>
</body>

</html>
